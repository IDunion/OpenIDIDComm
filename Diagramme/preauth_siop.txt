@startuml
!theme vibrant
!pragma teoz true
title "OID4VC DidComm extension"
participant Wallet
participant "Credential Issuer" as CI
skinparam ParticipantPadding 75

autonumber "(0)"

alt <color green>DidComm required</color>
    CI -> Wallet: SIOP Auth. Request
    Wallet -> CI: ID Token
    group DIDComm
       CI -> Wallet: Connection Request
       Wallet -> CI: Acknowledge
       CI -> Wallet: OID4VCI Offer
    end
else <color red>Not required</color>
    CI -> Wallet: OID4VCI Offer
end

|||

Wallet -> CI: Token Request
CI -> Wallet: Access Token
|||
Wallet -> CI: Credential Request
CI -> Wallet: Credential
@enduml
